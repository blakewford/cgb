#include <fcntl.h>
#include <stdio.h>
#include <unistd.h>

unsigned char pal1[]={
0xce,0x39,0x20,0x7e,0xea,0x00,0x00,0x00,
0xce,0x39,0xff,0x02,0xea,0x00,0x00,0x00,
0xce,0x39,0xff,0x7f,0xe4,0x13,0x00,0x00,
0xce,0x39,0xff,0x7f,0x20,0x7e,0x00,0x00,
0xce,0x39,0x3f,0x7d,0x70,0x7c,0x00,0x00,
0xce,0x39,0x1f,0x00,0xea,0x00,0x00,0x00,
0xce,0x39,0xff,0x7f,0x7f,0x01,0x00,0x00,
0xce,0x39,0xe0,0x63,0x20,0x7e,0x00,0x00,
};
unsigned char pal2[]={
0x29,0x39,0xe0,0x7c,0x40,0x28,0x00,0x00,
0x29,0x39,0xd3,0x02,0x40,0x28,0x00,0x00,
0x29,0x39,0xe0,0x7f,0xa4,0x52,0x00,0x00,
0x29,0x39,0xe0,0x7f,0xe0,0x7c,0x00,0x00,
0x29,0x39,0x2a,0x7d,0x23,0x7d,0x00,0x00,
0x29,0x39,0x16,0x30,0x40,0x28,0x00,0x00,
0x29,0x39,0xe0,0x7f,0xc0,0x7d,0x00,0x00,
0x29,0x39,0x20,0x7e,0xe0,0x7c,0x00,0x00,
};

#define STEPS 16

int main(int argc, char **argv) {
	int i,j,k,r1,g1,b1,r2,g2,b2,r,g,b,c,c1,c2;
	unsigned char bo[64];
	int f;
	char name[32];
	int res;

	for(i=0;i<=STEPS;++i)
	{
		k=STEPS-i;
		for(j=0;j<32;++j)
		{
			c1=pal1[j+j] | (pal1[j+j+1]<<8);
			c2=pal2[j+j] | (pal2[j+j+1]<<8);
			r1=c1&0x1f;
			g1=(c1>>5)&0x1f;
			b1=(c1>>10)&0x1f;
			r2=c2&0x1f;
			g2=(c2>>5)&0x1f;
			b2=(c2>>10)&0x1f;

			r=(k*r1+i*r2) /STEPS;
			g=(k*g1+i*g2) /STEPS;
			b=(k*b1+i*b2) /STEPS;
			c=r|(g<<5)|(b<<10);
			bo[j+j]=c&255;
			bo[j+j+1]=c>>8;
		}
		sprintf(name,"night%d.rgb",i);
		f=open(name,O_WRONLY|O_CREAT|O_TRUNC,0644);
		if(f>=0)
		{
			res=write(f,bo,sizeof(bo));res=res;
			close(f);
		}
	}
}
